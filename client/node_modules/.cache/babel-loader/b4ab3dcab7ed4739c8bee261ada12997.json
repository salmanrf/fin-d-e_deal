{"ast":null,"code":"var _jsxFileName = \"/Users/ozip/Documents/Web_Programming/fin-d-e_deal/client/src/pages/UserPage.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport { userStore } from \"../store\";\nimport useWebsites from \"../hooks/useWebsites\";\nimport { fetchCurrentUserWishlist } from \"../utils/users_api\";\nimport steamIcon from \"../assets/img/steam.png\";\nimport gogIcon from \"../assets/img/gog.png\";\nimport epicgamesIcon from \"../assets/img/epicgames.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UserPage = () => {\n  _s();\n\n  const {\n    token,\n    user\n  } = userStore(({\n    token,\n    user\n  }) => ({\n    token,\n    user\n  }));\n  const [wishlists, setWishlists] = useState([]);\n  useEffect(() => {\n    fetchCurrentUserWishlist(token).then(res => {\n      const {\n        success,\n        data\n      } = res;\n\n      if (success) {\n        const {\n          wishlists\n        } = data;\n        setWishlists(wishlists);\n      }\n    }).catch(() => null);\n  }, [user]);\n\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    id: \"user-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [user.fullName, \"'s Wishlist\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"line\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-wishlist-container\",\n      children: wishlists.map(wl => /*#__PURE__*/_jsxDEV(UserWishlistItem, {\n        game: wl\n      }, wl._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserPage, \"awPhduND1Xc+5OQJNR0EVEAoGSk=\");\n\n_c = UserPage;\n\nconst UserWishlistItem = ({\n  game\n}) => {\n  _s2();\n\n  const {\n    _id,\n    cover,\n    name\n  } = game;\n  const {\n    stores\n  } = useWebsites(_id);\n  const {\n    steam,\n    gog,\n    epicgames\n  } = stores || {};\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-result-item\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      className: \"cover\",\n      to: `/games/${_id}`,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `http:${(cover.url || cover).replace(\"t_thumb\", \"t_cover_big\")}`,\n        alt: `${name}'s cover'`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        className: \"title\",\n        to: `/games/${_id}`,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stores\",\n        children: [steam && /*#__PURE__*/_jsxDEV(StoreItem, {\n          icon: steamIcon,\n          store: steam\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), gog && /*#__PURE__*/_jsxDEV(StoreItem, {\n          icon: gogIcon,\n          store: gog\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 19\n        }, this), epicgames && /*#__PURE__*/_jsxDEV(StoreItem, {\n          icon: epicgamesIcon,\n          store: epicgames\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(UserWishlistItem, \"18Lpg1iM6cclIkA0q9CLPLVNkso=\", false, function () {\n  return [useWebsites];\n});\n\n_c2 = UserWishlistItem;\n\nconst StoreItem = ({\n  store,\n  icon,\n  name\n}) => {\n  const {\n    url,\n    prices\n  } = store;\n  const discount = parseInt(prices.discount.match(/\\d+/));\n  return /*#__PURE__*/_jsxDEV(\"a\", {\n    className: \"store-item\",\n    href: url,\n    target: \"_blank\",\n    rel: \"noreferrer\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"store-item-steam\",\n      className: \"store-item-icon\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: icon,\n        alt: \"store's logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"store-item-name\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"store-item-prices\",\n      children: [prices && prices.discount && discount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"store-item-discount\",\n        children: prices.discount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), prices && prices.fullPrice && discount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"store-item-fullprice\",\n        children: prices.fullPrice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), prices && prices.currentPrice && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"store-item-currentprice\",\n        children: prices.currentPrice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n\n_c3 = StoreItem;\nexport default UserPage;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"UserPage\");\n$RefreshReg$(_c2, \"UserWishlistItem\");\n$RefreshReg$(_c3, \"StoreItem\");","map":{"version":3,"sources":["/Users/ozip/Documents/Web_Programming/fin-d-e_deal/client/src/pages/UserPage.jsx"],"names":["useState","useEffect","Redirect","Link","userStore","useWebsites","fetchCurrentUserWishlist","steamIcon","gogIcon","epicgamesIcon","UserPage","token","user","wishlists","setWishlists","then","res","success","data","catch","fullName","map","wl","_id","UserWishlistItem","game","cover","name","stores","steam","gog","epicgames","url","replace","StoreItem","store","icon","prices","discount","parseInt","match","fullPrice","currentPrice"],"mappings":";;;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,QAAT,EAAmBC,IAAnB,QAA+B,kBAA/B;AAEA,SAASC,SAAT,QAA0B,UAA1B;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,SAASC,wBAAT,QAAyC,oBAAzC;AAEA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,aAAP,MAA0B,6BAA1B;;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AACrB,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAkBR,SAAS,CAAC,CAAC;AAAEO,IAAAA,KAAF;AAASC,IAAAA;AAAT,GAAD,MAAsB;AAAED,IAAAA,KAAF;AAASC,IAAAA;AAAT,GAAtB,CAAD,CAAjC;AACA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4Bd,QAAQ,CAAC,EAAD,CAA1C;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdK,IAAAA,wBAAwB,CAACK,KAAD,CAAxB,CACGI,IADH,CACSC,GAAD,IAAS;AACb,YAAM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,UAAoBF,GAA1B;;AAEA,UAAIC,OAAJ,EAAa;AACX,cAAM;AAAEJ,UAAAA;AAAF,YAAgBK,IAAtB;AACAJ,QAAAA,YAAY,CAACD,SAAD,CAAZ;AACD;AACF,KARH,EASGM,KATH,CASS,MAAM,IATf;AAUD,GAXQ,EAWN,CAACP,IAAD,CAXM,CAAT;;AAaA,MAAI,CAACA,IAAL,EAAW;AACT,wBAAO,QAAC,QAAD;AAAU,MAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,YAAP;AACD;;AAED,sBACE;AAAM,IAAA,EAAE,EAAC,qBAAT;AAAA,4BACE;AAAA,8BACE;AAAA,mBAAOA,IAAI,CAACQ,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAK,QAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAKE;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA,gBACGP,SAAS,CAACQ,GAAV,CAAeC,EAAD,iBACb,QAAC,gBAAD;AAAkB,QAAA,IAAI,EAAEA;AAAxB,SAAiCA,EAAE,CAACC,GAApC;AAAA;AAAA;AAAA;AAAA,cADD;AADH;AAAA;AAAA;AAAA;AAAA,YALF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAaD,CAlCD;;GAAMb,Q;;KAAAA,Q;;AAoCN,MAAMc,gBAAgB,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAc;AAAA;;AACrC,QAAM;AAAEF,IAAAA,GAAF;AAAOG,IAAAA,KAAP;AAAcC,IAAAA;AAAd,MAAuBF,IAA7B;AACA,QAAM;AAAEG,IAAAA;AAAF,MAAavB,WAAW,CAACkB,GAAD,CAA9B;AACA,QAAM;AAAEM,IAAAA,KAAF;AAASC,IAAAA,GAAT;AAAcC,IAAAA;AAAd,MAA4BH,MAAM,IAAI,EAA5C;AAEA,sBACE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA,4BACE,QAAC,IAAD;AAAM,MAAA,SAAS,EAAC,OAAhB;AAAwB,MAAA,EAAE,EAAG,UAASL,GAAI,EAA1C;AAAA,6BACE;AACE,QAAA,GAAG,EAAG,QAAO,CAACG,KAAK,CAACM,GAAN,IAAaN,KAAd,EAAqBO,OAArB,CAA6B,SAA7B,EAAwC,aAAxC,CAAuD,EADtE;AAEE,QAAA,GAAG,EAAG,GAAEN,IAAK;AAFf;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAOE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,8BACE,QAAC,IAAD;AAAM,QAAA,SAAS,EAAC,OAAhB;AAAwB,QAAA,EAAE,EAAG,UAASJ,GAAI,EAA1C;AAAA,+BACE;AAAA,oBAAOI;AAAP;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA,mBACGE,KAAK,iBAAI,QAAC,SAAD;AAAW,UAAA,IAAI,EAAEtB,SAAjB;AAA4B,UAAA,KAAK,EAAEsB;AAAnC;AAAA;AAAA;AAAA;AAAA,gBADZ,EAEGC,GAAG,iBAAI,QAAC,SAAD;AAAW,UAAA,IAAI,EAAEtB,OAAjB;AAA0B,UAAA,KAAK,EAAEsB;AAAjC;AAAA;AAAA;AAAA;AAAA,gBAFV,EAGGC,SAAS,iBAAI,QAAC,SAAD;AAAW,UAAA,IAAI,EAAEtB,aAAjB;AAAgC,UAAA,KAAK,EAAEsB;AAAvC;AAAA;AAAA;AAAA;AAAA,gBAHhB;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA,YAPF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAoBD,CAzBD;;IAAMP,gB;UAEenB,W;;;MAFfmB,gB;;AA2BN,MAAMU,SAAS,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA,IAAT;AAAeT,EAAAA;AAAf,CAAD,KAA2B;AAC3C,QAAM;AAAEK,IAAAA,GAAF;AAAOK,IAAAA;AAAP,MAAkBF,KAAxB;AACA,QAAMG,QAAQ,GAAGC,QAAQ,CAACF,MAAM,CAACC,QAAP,CAAgBE,KAAhB,CAAsB,KAAtB,CAAD,CAAzB;AAEA,sBACE;AAAG,IAAA,SAAS,EAAC,YAAb;AAA0B,IAAA,IAAI,EAAER,GAAhC;AAAqC,IAAA,MAAM,EAAC,QAA5C;AAAqD,IAAA,GAAG,EAAC,YAAzD;AAAA,4BACE;AAAK,MAAA,EAAE,EAAC,kBAAR;AAA2B,MAAA,SAAS,EAAC,iBAArC;AAAA,6BACE;AAAK,QAAA,GAAG,EAAEI,IAAV;AAAgB,QAAA,GAAG,EAAC;AAApB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAIE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA,6BACE;AAAA,kBAAOT;AAAP;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAJF,eAOE;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA,iBACGU,MAAM,IAAIA,MAAM,CAACC,QAAjB,IAA6BA,QAAQ,GAAG,CAAxC,iBACC;AAAM,QAAA,SAAS,EAAC,qBAAhB;AAAA,kBAAuCD,MAAM,CAACC;AAA9C;AAAA;AAAA;AAAA;AAAA,cAFJ,EAIGD,MAAM,IAAIA,MAAM,CAACI,SAAjB,IAA8BH,QAAQ,GAAG,CAAzC,iBACC;AAAM,QAAA,SAAS,EAAC,sBAAhB;AAAA,kBAAwCD,MAAM,CAACI;AAA/C;AAAA;AAAA;AAAA;AAAA,cALJ,EAOGJ,MAAM,IAAIA,MAAM,CAACK,YAAjB,iBACC;AAAM,QAAA,SAAS,EAAC,yBAAhB;AAAA,kBAA2CL,MAAM,CAACK;AAAlD;AAAA;AAAA;AAAA;AAAA,cARJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAPF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAqBD,CAzBD;;MAAMR,S;AA2BN,eAAexB,QAAf","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Redirect, Link } from \"react-router-dom\";\n\nimport { userStore } from \"../store\";\nimport useWebsites from \"../hooks/useWebsites\";\nimport { fetchCurrentUserWishlist } from \"../utils/users_api\";\n\nimport steamIcon from \"../assets/img/steam.png\";\nimport gogIcon from \"../assets/img/gog.png\";\nimport epicgamesIcon from \"../assets/img/epicgames.png\";\n\nconst UserPage = () => {\n  const { token, user } = userStore(({ token, user }) => ({ token, user }));\n  const [wishlists, setWishlists] = useState([]);\n\n  useEffect(() => {\n    fetchCurrentUserWishlist(token)\n      .then((res) => {\n        const { success, data } = res;\n\n        if (success) {\n          const { wishlists } = data;\n          setWishlists(wishlists);\n        }\n      })\n      .catch(() => null);\n  }, [user]);\n\n  if (!user) {\n    return <Redirect to=\"/\" />;\n  }\n\n  return (\n    <main id=\"user-page-container\">\n      <header>\n        <span>{user.fullName}'s Wishlist</span>\n        <div className=\"line\"></div>\n      </header>\n      <div className=\"user-wishlist-container\">\n        {wishlists.map((wl) => (\n          <UserWishlistItem game={wl} key={wl._id} />\n        ))}\n      </div>\n    </main>\n  );\n};\n\nconst UserWishlistItem = ({ game }) => {\n  const { _id, cover, name } = game;\n  const { stores } = useWebsites(_id);\n  const { steam, gog, epicgames } = stores || {};\n\n  return (\n    <div className=\"search-result-item\">\n      <Link className=\"cover\" to={`/games/${_id}`}>\n        <img\n          src={`http:${(cover.url || cover).replace(\"t_thumb\", \"t_cover_big\")}`}\n          alt={`${name}'s cover'`}\n        />\n      </Link>\n      <div className=\"info\">\n        <Link className=\"title\" to={`/games/${_id}`}>\n          <span>{name}</span>\n        </Link>\n        <div className=\"stores\">\n          {steam && <StoreItem icon={steamIcon} store={steam} />}\n          {gog && <StoreItem icon={gogIcon} store={gog} />}\n          {epicgames && <StoreItem icon={epicgamesIcon} store={epicgames} />}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst StoreItem = ({ store, icon, name }) => {\n  const { url, prices } = store;\n  const discount = parseInt(prices.discount.match(/\\d+/));\n\n  return (\n    <a className=\"store-item\" href={url} target=\"_blank\" rel=\"noreferrer\">\n      <div id=\"store-item-steam\" className=\"store-item-icon\">\n        <img src={icon} alt=\"store's logo\" />\n      </div>\n      <div className=\"store-item-name\">\n        <span>{name}</span>\n      </div>\n      <div className=\"store-item-prices\">\n        {prices && prices.discount && discount > 0 && (\n          <span className=\"store-item-discount\">{prices.discount}</span>\n        )}\n        {prices && prices.fullPrice && discount > 0 && (\n          <span className=\"store-item-fullprice\">{prices.fullPrice}</span>\n        )}\n        {prices && prices.currentPrice && (\n          <span className=\"store-item-currentprice\">{prices.currentPrice}</span>\n        )}\n      </div>\n    </a>\n  );\n};\n\nexport default UserPage;\n"]},"metadata":{},"sourceType":"module"}