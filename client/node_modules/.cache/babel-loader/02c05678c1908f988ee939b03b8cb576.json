{"ast":null,"code":"var _jsxFileName = \"/Users/ozip/Documents/Web_Programming/fin-d-e_deal/client/src/App.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { userStore, layoutStore } from \"./store\";\nimport { fetchRefresh } from \"./utils/auth_api\";\nimport { fetchCurrentUser } from \"./utils/users_api\";\nimport HomePage from \"./pages/HomePage\";\nimport GamePage from \"./pages/GamePage\";\nimport UserPage from \"./pages/UserPage\";\nimport MainHeader from \"./components/MainHeader\";\nimport LoginForm from \"./components/LoginForm\";\nimport SignupForm from \"./components/SignupForm\";\nimport \"./Sass/styles.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const {\n    token,\n    setToken,\n    setUser\n  } = userStore(store => store);\n  const {\n    showLoginForm,\n    showSignupForm,\n    setShowLoginForm,\n    setShowSignupForm\n  } = layoutStore(state => state);\n  useEffect(() => {\n    document.title = \"Fin(d)e Deal\";\n    fetchRefresh().then(({\n      data\n    }) => {\n      const {\n        token\n      } = data;\n      if (token) setToken(data.token);\n      return fetchCurrentUser(token);\n    }).then(res => {\n      if (res.success) {\n        const {\n          user\n        } = res.data;\n        setUser(user);\n      }\n    }).catch(() => null);\n  }, []);\n  useEffect(() => {\n    setTimeout(() => {\n      fetchRefresh().then(({\n        data\n      }) => {\n        const {\n          token\n        } = data;\n\n        if (token) {\n          setToken(data.token);\n        }\n      }).catch(() => null);\n    }, 1000 * 60 * 15);\n  }, [token]);\n  useEffect(() => {\n    showLoginForm && setShowSignupForm(false) || showSignupForm && setShowLoginForm(false);\n    showLoginForm || showSignupForm ? document.body.style.overflowY = \"hidden\" : document.body.style.overflowY = \"scroll\";\n  }, [showLoginForm, showSignupForm]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(MainHeader, {\n      showLogin: () => setShowLoginForm(true),\n      showSignup: () => setShowSignupForm(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), (showLoginForm || showSignupForm) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-overlay\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 45\n    }, this), showLoginForm && /*#__PURE__*/_jsxDEV(LoginForm, {\n      close: () => setShowLoginForm(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 26\n    }, this) || showSignupForm && /*#__PURE__*/_jsxDEV(SignupForm, {\n      close: () => setShowSignupForm(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\",\n        children: /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/user\",\n        children: /*#__PURE__*/_jsxDEV(UserPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/games\",\n        children: /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/games/search\",\n        children: /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/games/:id\",\n        children: /*#__PURE__*/_jsxDEV(GamePage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"ewq31d5h+FnD/qJW52w5UqeNMN4=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/ozip/Documents/Web_Programming/fin-d-e_deal/client/src/App.jsx"],"names":["useState","useEffect","Switch","Route","userStore","layoutStore","fetchRefresh","fetchCurrentUser","HomePage","GamePage","UserPage","MainHeader","LoginForm","SignupForm","App","token","setToken","setUser","store","showLoginForm","showSignupForm","setShowLoginForm","setShowSignupForm","state","document","title","then","data","res","success","user","catch","setTimeout","body","style","overflowY"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\n\nimport { userStore, layoutStore } from \"./store\";\nimport { fetchRefresh } from \"./utils/auth_api\";\nimport { fetchCurrentUser } from \"./utils/users_api\";\n\nimport HomePage from \"./pages/HomePage\";\nimport GamePage from \"./pages/GamePage\";\nimport UserPage from \"./pages/UserPage\";\nimport MainHeader from \"./components/MainHeader\";\nimport LoginForm from \"./components/LoginForm\";\nimport SignupForm from \"./components/SignupForm\";\n\nimport \"./Sass/styles.scss\";\n\nconst App = () => {\n  const { token, setToken, setUser } = userStore((store) => store);\n  const { showLoginForm, showSignupForm, setShowLoginForm, setShowSignupForm } =\n    layoutStore((state) => state);\n\n  useEffect(() => {\n    document.title = \"Fin(d)e Deal\";\n\n    fetchRefresh()\n      .then(({ data }) => {\n        const { token } = data;\n\n        if (token) setToken(data.token);\n\n        return fetchCurrentUser(token);\n      })\n      .then((res) => {\n        if (res.success) {\n          const { user } = res.data;\n\n          setUser(user);\n        }\n      })\n      .catch(() => null);\n  }, []);\n\n  useEffect(() => {\n    setTimeout(() => {\n      fetchRefresh()\n        .then(({ data }) => {\n          const { token } = data;\n\n          if (token) {\n            setToken(data.token);\n          }\n        })\n        .catch(() => null);\n    }, 1000 * 60 * 15);\n  }, [token]);\n\n  useEffect(() => {\n    (showLoginForm && setShowSignupForm(false)) ||\n      (showSignupForm && setShowLoginForm(false));\n\n    showLoginForm || showSignupForm\n      ? (document.body.style.overflowY = \"hidden\")\n      : (document.body.style.overflowY = \"scroll\");\n  }, [showLoginForm, showSignupForm]);\n\n  return (\n    <div className=\"app\">\n      <MainHeader\n        showLogin={() => setShowLoginForm(true)}\n        showSignup={() => setShowSignupForm(true)}\n      />\n      {(showLoginForm || showSignupForm) && <div className=\"form-overlay\" />}\n      {(showLoginForm && <LoginForm close={() => setShowLoginForm(false)} />) ||\n        (showSignupForm && (\n          <SignupForm close={() => setShowSignupForm(false)} />\n        ))}\n      <Switch>\n        <Route exact path=\"/\">\n          <HomePage />\n        </Route>\n        <Route path=\"/user\">\n          <UserPage />\n        </Route>\n        <Route exact path=\"/games\">\n          <HomePage />\n        </Route>\n        <Route exact path=\"/games/search\">\n          <HomePage />\n        </Route>\n        <Route path=\"/games/:id\">\n          <GamePage />\n        </Route>\n      </Switch>\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}