{"ast":null,"code":"var _jsxFileName = \"/Users/ozip/Documents/Web_Programming/fin-d-e_deal/client/src/components/MostPopularItem.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { FaRegHeart, FaHeart } from \"react-icons/fa\";\nimport { userStore, layoutStore } from \"../store\";\nimport useWishlists from \"../hooks/useWishlists\";\nimport { fetchAddRemoveWishlist } from \"../utils/games_api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MostPopularItem = ({\n  game,\n  distance = 0\n}) => {\n  _s();\n\n  const {\n    _id,\n    name,\n    cover,\n    genres,\n    wishlistedBy\n  } = game;\n  const {\n    token,\n    user\n  } = userStore(state => state);\n  const {\n    setShowLoginForm\n  } = layoutStore(state => state);\n  const {\n    isWishlisted,\n    addToWishlist,\n    removeFromWishlist\n  } = useWishlists(_id);\n  const [wishlistCount, setWishlistCount] = useState(wishlistedBy.count);\n\n  async function addRemoveWishlist() {\n    if (!user) {\n      return setShowLoginForm(true);\n    }\n\n    if (isWishlisted) {\n      removeFromWishlist(_id);\n      setWishlistCount(wishlistCount - 1);\n      const {\n        success\n      } = await fetchAddRemoveWishlist(_id, token);\n\n      if (!success) {\n        setWishlistCount(wishlistCount + 1);\n        return addToWishlist(_id);\n      }\n    } else {\n      addToWishlist(_id);\n      setWishlistCount(wishlistCount + 1);\n      const {\n        success\n      } = await fetchAddRemoveWishlist(_id, token);\n\n      if (!success) {\n        setWishlistCount(wishlistCount - 1);\n        return removeFromWishlist(_id);\n      }\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"carousel-item-portrait\",\n    style: {\n      borderLeft: `${parseInt(distance) / 2}px solid hsl(220, 13%, 18%, 80%)`,\n      borderRight: `${parseInt(distance) / 2}px solid hsl(220, 13%, 18%, 80%)`\n    },\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      className: \"carousel-image\",\n      to: `/games/${_id}`,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `https:${cover.replace(\"t_thumb\", \"t_cover_big\")}`,\n        alt: `${name}'s cover`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popular-game-info\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        className: \"name-genres\",\n        to: `/games/${_id}`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"name\",\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"genres\",\n          children: genres instanceof Array && genres.reduce((prev, curr, index) => prev + `${curr}${index < genres.length - 1 ? \",\" : \"\"}  `, \"\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wishlist-count\",\n        children: [isWishlisted ? /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: addRemoveWishlist,\n          children: /*#__PURE__*/_jsxDEV(FaHeart, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: addRemoveWishlist,\n          children: /*#__PURE__*/_jsxDEV(FaRegHeart, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: wishlistCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MostPopularItem, \"iXDdJ2wOD0VHTSNTqw0ROCdSC+I=\", false, function () {\n  return [useWishlists];\n});\n\n_c = MostPopularItem;\nexport default MostPopularItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"MostPopularItem\");","map":{"version":3,"sources":["/Users/ozip/Documents/Web_Programming/fin-d-e_deal/client/src/components/MostPopularItem.jsx"],"names":["useState","useEffect","Link","FaRegHeart","FaHeart","userStore","layoutStore","useWishlists","fetchAddRemoveWishlist","MostPopularItem","game","distance","_id","name","cover","genres","wishlistedBy","token","user","state","setShowLoginForm","isWishlisted","addToWishlist","removeFromWishlist","wishlistCount","setWishlistCount","count","addRemoveWishlist","success","borderLeft","parseInt","borderRight","replace","Array","reduce","prev","curr","index","length"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { FaRegHeart, FaHeart } from \"react-icons/fa\";\n\nimport { userStore, layoutStore } from \"../store\";\nimport useWishlists from \"../hooks/useWishlists\";\nimport { fetchAddRemoveWishlist } from \"../utils/games_api\";\n\nconst MostPopularItem = ({ game, distance = 0 }) => {\n  const { _id, name, cover, genres, wishlistedBy } = game;\n  const { token, user } = userStore((state) => state);\n  const { setShowLoginForm } = layoutStore((state) => state);\n  const { isWishlisted, addToWishlist, removeFromWishlist } = useWishlists(_id);\n  const [wishlistCount, setWishlistCount] = useState(wishlistedBy.count);\n\n  async function addRemoveWishlist() {\n    if (!user) {\n      return setShowLoginForm(true);\n    }\n\n    if (isWishlisted) {\n      removeFromWishlist(_id);\n      setWishlistCount(wishlistCount - 1);\n\n      const { success } = await fetchAddRemoveWishlist(_id, token);\n\n      if (!success) {\n        setWishlistCount(wishlistCount + 1);\n        return addToWishlist(_id);\n      }\n    } else {\n      addToWishlist(_id);\n      setWishlistCount(wishlistCount + 1);\n\n      const { success } = await fetchAddRemoveWishlist(_id, token);\n\n      if (!success) {\n        setWishlistCount(wishlistCount - 1);\n        return removeFromWishlist(_id);\n      }\n    }\n  }\n\n  return (\n    <div\n      className=\"carousel-item-portrait\"\n      style={{\n        borderLeft: `${parseInt(distance) / 2}px solid hsl(220, 13%, 18%, 80%)`,\n        borderRight: `${\n          parseInt(distance) / 2\n        }px solid hsl(220, 13%, 18%, 80%)`,\n      }}\n    >\n      <Link className=\"carousel-image\" to={`/games/${_id}`}>\n        <img\n          src={`https:${cover.replace(\"t_thumb\", \"t_cover_big\")}`}\n          alt={`${name}'s cover`}\n        />\n      </Link>\n      <div className=\"popular-game-info\">\n        <Link className=\"name-genres\" to={`/games/${_id}`}>\n          <span className=\"name\">{name}</span>\n          <span className=\"genres\">\n            {genres instanceof Array &&\n              genres.reduce(\n                (prev, curr, index) =>\n                  prev + `${curr}${index < genres.length - 1 ? \",\" : \"\"}  `,\n                \"\"\n              )}\n          </span>\n        </Link>\n        <div className=\"wishlist-count\">\n          {isWishlisted ? (\n            <div onClick={addRemoveWishlist}>\n              <FaHeart />\n            </div>\n          ) : (\n            <div onClick={addRemoveWishlist}>\n              <FaRegHeart />\n            </div>\n          )}\n          <span>{wishlistCount}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MostPopularItem;\n"]},"metadata":{},"sourceType":"module"}